import { viem } from 'hardhat'

import { decodeEventLog, parseEther, zeroAddress } from 'viem'

import { deployPxls } from './MagicPixels'
import { deployPlts } from './MagicPlates'
import { openTrade } from './trade'
import { colors } from './colors'
import { FacetCutAction, getSelectors } from './libraries/diamond'


export async function updatePxls() {
	// const [acc1, acc2] = await viem.getWalletClients()
	// const publicClient = await viem.getPublicClient()

	const diamondAddr = "0x2d40d461556A9F198CdA1377E61aD4d60A866E44"; // await deployPxls();

	// (await viem.getContractAt("MagicPlates", "0x3EBa0d9606003e6604ebA2d2ecf0f02b947e9d22")).write.setColors([colors])

	const pxlsAdmin = await viem.getContractAt("PxlsAdmin", diamondAddr)

	await pxlsAdmin.write.adminMint([
		"0x4e657468657200000000000000000000",
		"0xbe000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be0000009497000093940000be000000be000000be000000be00000018be0000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be00000019be0000be000000be000000be0000009394000094970000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be00000018be0000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be0000005456000057590000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be0000005759000054560000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000b8ba0000b8ba0000b8ba0000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000b8ba0000b8ba0000b8ba0000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be00000019be0000be000000be000000be000000be000000be000000be000000be000000be000000b8ba0000b8ba0000b8ba0000be000000be000000be000000be000000be00000015be0000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000777900007779000077790000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000777900006e6f000077790000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000777900007779000077790000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be0000001c1e00001c1e00001c1e0000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be00000016be0000be000000be000000be000000be000000be0000001c1e00001c1e00001c1e0000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be0000001c1e00001c1e00001c1e0000be000000be000000be000000be00000018be0000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000393b000044460000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000adb70000adb70000adb70000be000000be000000be000000be000000be000000be000000be000000be000000be00000044460000393b0000be000000be000000be000000be000000be00000016be0000be000000be000000be000000be000000adb70000a3a40000adb70000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000adb70000adb70000adb70000be000000be000000be00000018be0000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be00000018be0000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000be000000",
		"0x001e001e001f00320024003c003200140036005a0037005000450002006f00380070004600930061009400140095006e00ab002300ac000100ad000c00ba005000c3004100c4003c00c5004600cb003200ea003200eb001400ec00360102006b01040056011a0014011b005a011c003201290043012a0059012b000f013b003c01410027014200000143004b01590056015a0023015b006501b3005a01b4003201bf006401c0004601c1000a01cc002801d2002a01d7001e01d8000101d9005a01ef005001f0004601f1001401f5005002120025"
	])

	// const cutFacet = await viem.getContractAt("DiamondCutFacet", diamondAddr)
	// const loupeFacet = await viem.getContractAt("DiamondLoupeFacet", diamondAddr)

	// const oldCoreAddr = "0x0C12e6441B0D24eE2b9055596bF9e045fc0899d2"
	// const oldCoreSelectors = await loupeFacet.read.facetFunctionSelectors([oldCoreAddr])

	// await cutFacet.write.diamondCut([
	// 	[
	// 		{ 
	// 			facetAddress: zeroAddress,
	// 			action: FacetCutAction.Remove,
	// 			functionSelectors: oldCoreSelectors
	// 		}
	// 	],
	// 	zeroAddress,
	// 	"0x"
	// ])

	// console.log(await loupeFacet.read.facetFunctionSelectors([oldCoreAddr]))

	// const pxlsCoreNew = await viem.deployContract("PxlsAdmin")

	// await cutFacet.write.diamondCut([
	// 	[
	// 		{
	// 			facetAddress: pxlsCoreNew.address,
	// 			action: FacetCutAction.Add,
	// 			functionSelectors: getSelectors(pxlsCoreNew.abi)
	// 		}
	// 	],
	// 	zeroAddress,
	// 	"0x"
	// ])

	// console.log(await loupeFacet.read.facetFunctionSelectors([pxlsCoreNew.address]))

	// console.log(pxlsCoreNew.address)
}

updatePxls().catch((error) => {
  console.error(error)
  process.exitCode = 1
})
